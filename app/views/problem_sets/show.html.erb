<% content_for :title, @problem_set.title %>
<table width="100%">
  <tr>
    <th>Title</th>
    <th></th>
    <% if policy(Problem).update? %>
      <th></th>
    <% end %>
    <% if policy(@problem_set).update? %>
      <th></th>
    <% end %>
  </tr>
  <% @problem_set.problems.each do |problem| %>
    <tr>
      <td><%= problem.title %></td>
      <td><%= link_to 'Show', problem %></td>
      <% if policy(Problem).update? %>
        <td><%= link_to 'Edit', edit_problem_path(problem) if policy(problem).update? %></td>
      <% end %>
      <% if policy(@problem_set).update? %>
        <td><%= link_to 'Remove', remove_problem_problem_set_path(@problem_set, :problem_id => problem.id), :method => "put" %></td>
      <% end %>
    </tr>
  <% end %>
</table>
<% if policy(@problem_set).use? %>
  <p>
  <%= form_tag(group_problem_set_add_path(:problem_set_id => @problem_set), :method => :put) do %>
    <%= collection_select :problem_set, :group_ids, @groups, :id, :name %>
    <%= submit_tag "Give group access" %>
  <% end %>
  </p>

  <%= link_to 'Edit', edit_problem_set_path(@problem_set) %>
<% end %>
