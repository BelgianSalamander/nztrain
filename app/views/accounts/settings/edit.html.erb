<h2>Edit profile<%#= resource_name.to_s.humanize %></h2>

<%= form_for(resource, :as => resource_name, :url => "/accounts/settings/update", :html => { :multipart => true, :method => :put }) do |f| %>
  <%= devise_error_messages! %>
  <p><%= f.label :username %><br />
  <div style="display: inline-block; min-width: 20em;"><%= @user[:username] %></div> <%= link_to "change", edit_user_registration_path + '/username' %></p>

  <p><%= f.label :name %><br />
  <%= f.text_field :name %></p>

  <p><%= f.label :email %><br />
  <div style="display: inline-block; min-width: 20em;"><%= @user[:email] %></div> <%= link_to "change", edit_user_registration_path + '/email' %></p>
  <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
    <p>Currently waiting confirmation for: <%= resource.unconfirmed_email %></p>
  <% end %>

  <p><%= f.label :password %><br />
  <div style="display: inline-block; min-width: 20em;">********</div> <%= link_to "change", edit_user_registration_path + '/password' %></p>

  <p><%= f.label :avatar %><br />
  <% if @user.avatar? %>
    <img src="<%= @user.avatar_url %>"><br />
    <label><%= f.check_box :remove_avatar %>Remove current avatar</label><br />
  <% end %>
  <%= f.file_field :avatar %>
  <%= f.hidden_field :avatar_cache %></p>

  <p><%= f.label :name %><br />
  <%= country_select(:user, :country, selected: request.location.try(:country_code), priority_countries: ["NZ", "AU"] ) %></p>


  <p><%= f.submit "Update" %></p>
<% end %>

<%= link_to "Back", :back %>
